<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Your App Title">
    <link rel="apple-touch-icon" href="https://i.imgur.com/V1zQRS2.png">
    <title>IES Manhour Costing</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/V1zQRS2.png">
    <style>
        *{
            box-sizing: border-box;
            padding: 0;
            margin: 0;
            font-family: 'poppins', sans-serif;
            font-size: 18px;
        }
        body{
            background-image: url('https://i.imgur.com/Md6Kb3q.png');
            background-size: cover;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        h4 {
            text-align: center;
            margin-bottom: 20px; /* Add some space below the heading */
            background-color: rgba(128, 128, 128, 0.7); /* Grey transparent background */
            color: #fff; /* Text color */
            padding: 10px; /* Padding to create some space around the text */
            border-radius: 10px; /* Border radius */
        }

        .container{
            width: 500px;
            padding: 10px;
            border: 1px solid #eeeeee;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.5);
            position: relative;
            margin: 50px auto; 
            }
        .name-buttons {
            width: auto;
            padding: 30px;
            border: 1px solid #eeeeee;
            border-radius: 10px;
            background-color: rgba(128, 128, 128, 0.5); /* Grey transparent background */
            position: relative;
            display: inline-block;
            margin-right: 20px;
        }
        #name-buttons {
            text-align: center;
        }

        .project-type{
            background-color: #7bbbf0;
            color: rgb(0, 0, 0);
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 10px;
            width: 160px; /* Adjust width as needed */
        }

        #project-type {
            text-align: center;
        }


        .job-type-options{
            width: auto;
            padding: 30px;
            border: 1px solid #eeeeee;
            border-radius: 10px;
            background-color: rgba(128, 128, 128, 0.5); /* Grey transparent background */
            position: relative;
            display: inline-block;
            margin-right: 20px;
        }
        #job-type-options {
            text-align: center;
        }


        .name-selection-button {
            background-color:  #23408F;
            color: rgb(255, 255, 255);
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 10px;
            width: 160px; /* Adjust width as needed */
        }
        .project-selection-button {
            background-color: #23408F;
            color: rgb(255, 255, 255);
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 10px;
            width: calc(50% - 10px); /* 50% width minus 10px for margin */
            display: inline-block; /* Display inline-block to create a 2-column layout */
            margin-right: 10px; /* Add some margin between buttons */
            margin-bottom: 10px; /* Add some margin between rows */
        }

        .job-type-button {
            background-color:  #23408F;
            color: rgb(255, 255, 255);
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 10px;
            width: 160px; /* Adjust width as needed */
        }


/* Clear the margin for the last button in each column */

        .name-selection-button:hover,
        .job-type-button:hover,
        .project-selection-button:hover {
        background-color: rgb(255, 255, 255);
        color: #23408F; /* Black font color */
        }

        .selected {
            background-color: #ff0000;
            color: white; /* Change font color to white */
        }

        .job-type-button.selected {
            background-color: orangered;
            color: white; /* Change font color to white */
        }

        select[name="time-start"],
        select[name="time-stop"] {
            display: block;
            margin-top: 10px;
            padding: 10px;
            width: 200px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
            line-height: 1.5;
        }

        .time-container {
            text-align: center; /* Center the content horizontally */
            margin: 0 auto; /* Center the container horizontally */
        }

        .time-container select {
            /* Styles for the dropdowns */
            display: inline-block; /* Display the dropdowns in a row */
            margin: 10px; /* Adjust margin as needed */
        }

        #submit{
            display: block;
            margin: 10px auto 10px; /* Adjust the top margin as needed */
            padding: 10px 20px;
            background-color: orangered;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 200px;
            font-size: 16px;
            line-height: 1.5;
        }
        #submit:hover{
            background-color: #333333;
        }

        @media screen and (max-width: 380px) {
            .name-selection-button {
                /* Adjust the font size and padding to make the buttons smaller */
                font-size: 12px;
                padding: 4px 6px;
                width: 100px; /* Adjust width as needed */
                Height: 30px; /* Adjust width as needed */
            }
        }
        @media screen and (max-width: 380px) {
            .project-selection-button {
                /* Adjust the font size and padding to make the buttons smaller */
                font-size: 12px;
                width: 180px; /* Adjust width as needed */
                Height: 30px; /* Adjust width as needed */
            }
        }
        @media screen and (max-width: 380px) {
            .job-type-button {
                /* Adjust the font size and padding to make the buttons smaller */
                font-size: 12px;
                padding: 8px 12px;
            }
        }
        @media screen and (max-width: 380px) {
            .time-container select {
                /* Adjust the font size and padding to make the dropdowns smaller */
                font-size: 12px;
                padding: 6px 10px;
            }
        }
        @media screen and (max-width: 380px) {
            h4 {
                font-size: 12px; /* Adjust font size as needed */
            }
        }

        @media screen and (max-width: 380px) {
            .container img {
                width: 250px; /* Adjust the maximum width of the image */
                height: auto; /* Maintain the aspect ratio */
                display: block; /* Make the image a block element */
                margin: 0 auto; /* Center the image horizontally */
            }
        }

    </style>
</head>
<body>
    <div class="container">
        <img src="https://i.imgur.com/XZvd1fv.png" alt="Sample Image" style="max-width: 100%; height: auto;">
        <form method="post" action="https://script.google.com/macros/s/AKfycbyZJW5Q7OsF5tfQJBTCcEt1V_xnjw2R61TMLvOdMxBnIQZgAzqMZeYi-LaNXAoMhPGN/exec" name="contact-form" onsubmit="return addDateTime()">
            <h4>MANPOWER HOURS SYSTEM</h4>
            <div id="name-buttons">
                <button type="button" class="name-selection-button" onclick="selectName(this, 'Ruth Yap')">Ruth Yap</button>
                <button type="button" class="name-selection-button" onclick="selectName(this, 'Haeginan')">Haeginan</button>
                <button type="button" class="name-selection-button" onclick="selectName(this, 'Nur Areef')">Nur Areef</button>
                <button type="button" class="name-selection-button" onclick="selectName(this, 'Iqbal')">Iqbal</button>
                <button type="button" class="name-selection-button" onclick="selectName(this, 'Murugesan')">Murugesan</button>
                <button type="button" class="name-selection-button" onclick="selectName(this, 'Naren')">Naren</button>
                <button type="button" class="name-selection-button" onclick="selectName(this, 'Thanesh')">Thanesh</button>
                <button type="button" class="name-selection-button" onclick="selectName(this, 'Theiven')">Theiven</button>
                <button type="button" class="name-selection-button" onclick="selectName(this, 'Sathiaraj')">Sathiaraj</button>
                <button type="button" class="name-selection-button" onclick="selectName(this, 'Viknesh')">Viknesh</button>
            </div>
            <div id="project-type">
                <button type="button" class="project-selection-button" onclick="toggleProjectType(this, '40kVA')">40kVA</button>
                <button type="button" class="project-selection-button" onclick="toggleProjectType(this, 'M3 Hybrid BESS')">M3 BESS</button>
                <button type="button" class="project-selection-button" onclick="toggleProjectType(this, 'Deutz BESS')">Deutz</button>
            </div>
            <div id="job-type-options" style="display: none;">
                <!-- Job type options will be dynamically added here -->
            </div>
            <div class="time-container">
                <select name="time-start" required>
                    <option value="" disabled selected>Start time</option>
                    <option value="08:00">08:00</option>
                    <option value="08:30">08:30</option>
                    <option value="09:00">09:00</option>
                    <option value="09:30">09:30</option>
                    <option value="10:00">10:00</option>
                    <option value="10:30">10:30</option>
                    <option value="11:00">11:00</option>
                    <option value="11:30">11:30</option>
                    <option value="12:00">12:00</option>
                    <option value="12:30">12:30</option>
                    <option value="13:00">13:00</option>
                    <option value="13:30">13:30</option>
                    <option value="14:00">14:00</option>
                    <option value="14:30">14:30</option>
                    <option value="15:00">15:00</option>
                    <option value="15:30">15:30</option>
                    <option value="16:00">16:00</option>
                    <option value="16:30">16:30</option>
                    <option value="17:00">17:00</option>
                    <option value="17:30">17:30</option>
                    <option value="18:00">18:00</option>
                    <option value="18:30">18:30</option>
                    <option value="19:00">19:00</option>
                </select>
                <select name="time-stop" required>
                    <option value="" disabled selected>Stop time</option>
                    <option value="08:00">08:00</option>
                    <option value="08:30">08:30</option>
                    <option value="09:00">09:00</option>
                    <option value="09:30">09:30</option>
                    <option value="10:00">10:00</option>
                    <option value="10:30">10:30</option>
                    <option value="11:00">11:00</option>
                    <option value="11:30">11:30</option>
                    <option value="12:00">12:00</option>
                    <option value="12:30">12:30</option>
                    <option value="13:00">13:00</option>
                    <option value="13:30">13:30</option>
                    <option value="14:00">14:00</option>
                    <option value="14:30">14:30</option>
                    <option value="15:00">15:00</option>
                    <option value="15:30">15:30</option>
                    <option value="16:00">16:00</option>
                    <option value="16:30">16:30</option>
                    <option value="17:00">17:00</option>
                    <option value="17:30">17:30</option>
                    <option value="18:00">18:00</option>
                    <option value="18:30">18:30</option>
                    <option value="19:00">19:00</option>
                </select>
            </div> 
            <input type="hidden" name="Manpower-names" id="manpower-names">
            <input type="hidden" name="date" id="date">
            <input type="hidden" name="day" id="day">
            <input type="hidden" name="time-submission" id="time-submission">
            <input type="hidden" name="Project-Type" id="project-type-field">
            <input type="hidden" name="Job-Type" id="job-type-field">
            <input type="submit" value="Submit" id="submit">
        </form>
    </div>

    <!-- Add the loading overlay and spinner HTML -->
    <div class="loading-overlay" id="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
    </div>
    
    <script>
        function addDateTime() {
            var now = new Date();
            var dateField = document.getElementById("date");
            var dayField = document.getElementById("day");
            var timeSubmissionField = document.getElementById("time-submission");

            // Get the date in yyyy-mm-dd format
            var dateString = now.getFullYear() + "-" + (now.getMonth() + 1) + "-" + now.getDate();
            dateField.value = dateString;

            // Get the day (e.g., Monday, Tuesday, etc.)
            var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            var dayString = days[now.getDay()];
            dayField.value = dayString;

            // Get the current time in GMT+8
            var timeZoneOffset = 8; // GMT+8
            var utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            var gmtPlus8Time = new Date(utc + (3600000 * timeZoneOffset));
            var timeString = gmtPlus8Time.getHours().toString().padStart(2, '0') + ":" + gmtPlus8Time.getMinutes().toString().padStart(2, '0');
            timeSubmissionField.value = timeString;

            // Show confirmation message
            alert("Thank you");
        }

        function selectName(button, name) {
            var nameButtons = document.querySelectorAll('.name-selection-button');
            nameButtons.forEach(function(btn) {
                btn.classList.remove('selected');
            });
            button.classList.add('selected');
            var nameField = document.getElementById('manpower-names');
            nameField.value = name;
        }

        function toggleProjectType(button, projectType) {
        var projectTypeButtons = document.querySelectorAll('.project-selection-button');
        projectTypeButtons.forEach(function(btn) {
            btn.classList.remove('selected');
        });
        button.classList.add('selected');

        var jobTypeOptions = document.getElementById("job-type-options");
        if (projectType === "40kVA" || projectType === "M3 Hybrid BESS"|| projectType === "Deutz BESS") {
            jobTypeOptions.style.display = "block";
            createJobTypeOptions();
        } else {
            jobTypeOptions.style.display = "none";
        }

        // Set the selected project type to the hidden field
        var projectTypeField = document.getElementById('project-type-field');
        projectTypeField.value = projectType;
    }

    function createJobTypeOptions() {
        var jobTypeDropdown = document.getElementById("job-type-options");
        jobTypeDropdown.innerHTML = "";

        var jobTypes = ["ELECTRICAL", "MECHANICAL", "TESTING", "QAQC"];

        jobTypes.forEach(function(type) {
            var option = document.createElement("button");
            option.setAttribute("type", "button");
            option.setAttribute("class", "job-type-button");
            option.setAttribute("onclick", "selectJobType(this)");
            option.innerText = type;
            jobTypeDropdown.appendChild(option);
        });
    }

    function selectJobType(button) {
        var jobTypeButtons = document.querySelectorAll('.job-type-button');
        jobTypeButtons.forEach(function(btn) {
            btn.classList.remove('selected');
        });
        button.classList.add('selected');

        // Set the selected job type to the hidden field
        var jobTypeField = document.getElementById('job-type-field');
        jobTypeField.value = button.innerText;
    }

    </script>
</body>
</html>
